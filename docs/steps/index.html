<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Steps | Weaverbird</title>
<meta name="generator" content="Jekyll v3.8.4" />
<meta property="og:title" content="Steps" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Steps definition" />
<meta property="og:description" content="Steps definition" />
<link rel="canonical" href="https://weaverbird.toucantoco.com/docs/steps/" />
<meta property="og:url" content="https://weaverbird.toucantoco.com/docs/steps/" />
<meta property="og:site_name" content="Weaverbird" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-18T00:04:02+02:00" />
<script type="application/ld+json">
{"headline":"Steps","dateModified":"2019-10-18T00:04:02+02:00","datePublished":"2019-10-18T00:04:02+02:00","url":"https://weaverbird.toucantoco.com/docs/steps/","description":"Steps definition","@type":"WebPage","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="https://weaverbird.toucantoco.com/docs/steps/">
    <link rel="alternate" type="application/rss+xml" title="Weaverbird" href="https://weaverbird.toucantoco.com/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/">Weaverbird</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/docs/steps/">Docs</a></li>
                <!-- remove for the moment
                  <li ><a href="/blog/2019/10/02/v1-VQB/">Blog</a></li> -->
                <li ><a href="/about">About</a></li>
            </ul>
            <div class="navbar-right">
                <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="search" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form>
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/ToucanToco/vue-query-builder"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
            User interface
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse collapse" id="collapse-1" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/general-principles/">General Principles</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/aggregate/">Aggregate</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/argmax/">Argmax</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/argmin/">Argmin</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/delete/">Delete</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/duplicate/">Duplicate</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/fillnull/">Fill null</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/filter/">Fill null</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/formula/">Formula</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/keep/">Keep column</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/percentage/">Percentage</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/pivot/">Pivot</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/rename/">Rename</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/replace/">Replace</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/sort/">Sort</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/lowercase/">To lowercase</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/uppercase/">To uppercase</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/topnrows/">Top N rows</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/unpivot/">Unpivot</a>
            <!--  -->
          
        </div>
      </div>
    </div>
  
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
            Technical documentation
          </a>
        </h4>
      </div>
      
      
      <div class="panel-collapse" id="collapse-2" role="tabpanel" aria-label="Side Navigation">
        <div class="list-group">
          
            
            
            <!--  -->
              <a class="list-group-item active" href="/docs/steps/">Steps</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/stepforms/">Stepforms</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/known_limitations/">Known limitations</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/translators/">Translators</a>
            <!--  -->
          
            
            
            <!--  -->
              <a class="list-group-item " href="/docs/variables/">Variables</a>
            <!--  -->
          
        </div>
      </div>
    </div>
  
</div>

        </div>

        <div class="col-md-8">
            <div id="markdown-content-container"><h2 id="steps-definition">Steps definition</h2>

<p>This document describes the steps that can be used in our pipelines. A step is
the unit of transformation generated by a user interaction with the visual query
builder.</p>

<h3 id="aggregate-step"><code class="highlighter-rouge">aggregate</code> step</h3>

<p>Perform aggregations on one or several columns.</p>

<p>An aggreation step has the following strucure:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
   <span class="nl">name</span><span class="p">:</span> <span class="s1">'aggregate'</span><span class="p">,</span>
   <span class="nx">on</span><span class="p">:</span> <span class="p">[</span><span class="s1">'column1'</span><span class="p">,</span> <span class="s1">'column2'</span><span class="p">],</span>
   <span class="nx">aggregations</span><span class="p">:</span>  <span class="p">[</span>
      <span class="p">{</span>
          <span class="na">newcolumn</span><span class="p">:</span> <span class="s1">'sum_value1'</span><span class="p">,</span>
          <span class="na">aggfunction</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span>
          <span class="na">column</span><span class="p">:</span> <span class="s1">'value1'</span>
      <span class="p">}</span>
    <span class="c1">// ...</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example">Example:</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'aggregate'</span><span class="p">,</span>
   <span class="nx">on</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Group'</span><span class="p">],</span>
   <span class="nx">aggregations</span><span class="p">:</span>  <span class="p">[</span>
    <span class="p">{</span>
      <span class="na">newcolumn</span><span class="p">:</span> <span class="s1">'Total'</span><span class="p">,</span>
      <span class="na">aggfunction</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span>
      <span class="na">column</span><span class="p">:</span> <span class="s1">'Value'</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Group</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Group 1</td>
      <td>30</td>
    </tr>
    <tr>
      <td>Group 2</td>
      <td>16</td>
    </tr>
  </tbody>
</table>

<h3 id="argmax-step"><code class="highlighter-rouge">argmax</code> step</h3>

<p>Get row(s) matching the maximum value in a given <code class="highlighter-rouge">column</code>, by group if <code class="highlighter-rouge">groups</code>
is specified.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmax'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'value'</span><span class="p">,</span> <span class="c1">// column in which to search for max value</span>
    <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'group1'</span><span class="p">,</span> <span class="s1">'group2'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-1-without-groups">Example 1: without <code class="highlighter-rouge">groups</code></h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmax'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'Value'</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
  </tbody>
</table>

<h4 id="example-2-with-groups">Example 2: with <code class="highlighter-rouge">groups</code></h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmax'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
    <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Group'</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
  </tbody>
</table>

<h3 id="argmin-step"><code class="highlighter-rouge">argmin</code> step</h3>

<p>Get row(s) matching the minimum value in a given <code class="highlighter-rouge">column</code>, by group if <code class="highlighter-rouge">groups</code>
is specified.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmin'</span><span class="p">,</span>
  <span class="nx">column</span><span class="p">:</span> <span class="s1">'value'</span><span class="p">,</span> <span class="c1">// column in which to search for max value</span>
  <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'group1'</span><span class="p">,</span> <span class="s1">'group2'</span><span class="p">]</span> <span class="c1">// optional</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-1-without-groups-1">Example 1: without <code class="highlighter-rouge">groups</code></h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmin'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'Value'</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
  </tbody>
</table>

<h4 id="example-2-with-groups-1">Example 2: with <code class="highlighter-rouge">groups</code></h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'argmin'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
    <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Groups'</span><span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h3 id="custom-step"><code class="highlighter-rouge">custom</code> step</h3>

<p>This step allows to define a custom query that can’t be expressed using the
other existing steps.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'custom'</span><span class="p">,</span>
    <span class="nx">query</span><span class="p">:</span> <span class="s1">'$group: {_id: ...}'</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-using-mongo-query-language">Example: using Mongo query language</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'custom'</span><span class="p">,</span>
  <span class="nx">query</span><span class="p">:</span> <span class="s1">'$addFields: { Label: { $concat: [ "$Label", " - ", "$Group" ] ] } }'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
      <td>Company 1 - Group 1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td>7</td>
      <td>Company 2 - Group 1</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
      <td>Company 3 - Group 1</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
      <td>Company 4 - Group 2</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td>10</td>
      <td>Company 5 - Group 2</td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
      <td>Company 6 - Group 2</td>
    </tr>
  </tbody>
</table>

<h3 id="delete-step"><code class="highlighter-rouge">delete</code> step</h3>

<p>Delete a column.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'delete'</span><span class="p">,</span>
    <span class="nx">columns</span><span class="p">:</span> <span class="p">[</span><span class="s1">'my-column'</span><span class="p">,</span> <span class="s1">'some-other-column'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-1">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
      <td>Company 1 - Group 1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td>7</td>
      <td>Company 2 - Group 1</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
      <td>Company 3 - Group 1</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
      <td>Company 4 - Group 2</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td>10</td>
      <td>Company 5 - Group 2</td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
      <td>Company 6 - Group 2</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'delete'</span><span class="p">,</span>
  <span class="nx">columns</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Company'</span><span class="p">,</span> <span class="s1">'Group'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>13</td>
      <td>Company 1 - Group 1</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Company 2 - Group 1</td>
    </tr>
    <tr>
      <td>20</td>
      <td>Company 3 - Group 1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Company 4 - Group 2</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Company 5 - Group 2</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Company 6 - Group 2</td>
    </tr>
  </tbody>
</table>

<h3 id="domain-step"><code class="highlighter-rouge">domain</code> step</h3>

<p>This step is meant to select a specific domain (using MongoDB terminology).</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'domain'</span><span class="p">,</span>
    <span class="nx">domain</span><span class="p">:</span> <span class="s1">'my-domain'</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="duplicate-step"><code class="highlighter-rouge">duplicate</code> step</h3>

<p>This step is meant to duplicate a column.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'duplicate'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'my-column'</span>
    <span class="nx">new_column_name</span><span class="p">:</span> <span class="s1">'my-duplicate'</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-2">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>20</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'duplicate'</span><span class="p">,</span>
  <span class="nx">column</span><span class="p">:</span> <span class="s2">"Company"</span><span class="p">,</span>
  <span class="nx">new_column_name</span><span class="p">:</span> <span class="s2">"Company-copy"</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Value</th>
      <th>Company-copy</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>13</td>
      <td>Company 1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>0</td>
      <td>Company 2</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>20</td>
      <td>Company 3</td>
    </tr>
  </tbody>
</table>

<h3 id="fillna-step"><code class="highlighter-rouge">fillna</code> step</h3>

<p>Replace null values by a given value in a column.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'fillna'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s2">"foo"</span><span class="p">,</span>
    <span class="nx">value</span><span class="p">:</span> <span class="s2">"bar"</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-3">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td> </td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td> </td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'fillna'</span><span class="p">,</span>
  <span class="nx">column</span><span class="p">:</span> <span class="s2">"Value"</span><span class="p">,</span>
  <span class="nx">value</span><span class="p">:</span> <span class="mi">0</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td>0</td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<h3 id="filter-step"><code class="highlighter-rouge">filter</code> step</h3>

<p>Filter out lines that don’t match a filter definition.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'filter'</span><span class="p">,</span>
    <span class="nx">column</span><span class="p">:</span> <span class="s1">'my-column'</span><span class="p">,</span>
    <span class="nx">value</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
    <span class="nx">operator</span><span class="p">:</span> <span class="s1">'ne'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><code class="highlighter-rouge">operator</code> is optional, and defaults to <code class="highlighter-rouge">eq</code>. Allowed operators are <code class="highlighter-rouge">eq</code>, <code class="highlighter-rouge">ne</code>,
<code class="highlighter-rouge">gt</code>, <code class="highlighter-rouge">ge</code>, <code class="highlighter-rouge">lt</code>, <code class="highlighter-rouge">le</code>, <code class="highlighter-rouge">in</code>, <code class="highlighter-rouge">nin</code>.</p>

<p><code class="highlighter-rouge">value</code> can be an arbitrary value (e.g a list when used with the <code class="highlighter-rouge">in</code> operator)</p>

<h3 id="formula-step"><code class="highlighter-rouge">formula</code> step</h3>

<p>Add a computation based on other columns or on values.
Column names must not be escaped. Strings have to be escaped with quotes.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'formula'</span><span class="p">,</span>
    <span class="nx">new_column</span><span class="p">:</span> <span class="s1">'result'</span><span class="p">,</span> <span class="c1">// if the column already exists, overwrites it</span>
    <span class="nx">formula</span><span class="p">:</span> <span class="s1">'(Value1 + Value2) / Value3 - Value4 * 2'</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-4">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Value1</th>
      <th>Value2</th>
      <th>Value3</th>
      <th>Value4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>10</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>1</td>
      <td>13</td>
      <td>7</td>
      <td>3</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>5</td>
      <td>20</td>
      <td>5</td>
      <td>2</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'formula'</span><span class="p">,</span>
  <span class="nx">new_column</span><span class="p">:</span> <span class="s1">'Result'</span><span class="p">,</span>
  <span class="nx">formula</span><span class="p">:</span> <span class="s1">'(Value1 + Value2) / Value3 - Value4 * 2'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Value1</th>
      <th>Value2</th>
      <th>Value3</th>
      <th>Value4</th>
      <th>Result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>10</td>
      <td>2</td>
      <td>3</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>1</td>
      <td>13</td>
      <td>7</td>
      <td>3</td>
      <td>-4</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>5</td>
      <td>20</td>
      <td>5</td>
      <td>2</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h3 id="percentage-step"><code class="highlighter-rouge">percentage</code> step</h3>

<p>Compute the percentage of total, i.e. for every row the value in <code class="highlighter-rouge">column</code> divided
by the total as the sum of every values in <code class="highlighter-rouge">column</code>. The computation can be performed
by <code class="highlighter-rouge">group</code> if specified. The result can be either ouput inplace or in a <code class="highlighter-rouge">new_column</code> if specified</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'percentage'</span><span class="p">,</span>
  <span class="nx">new_column</span><span class="p">:</span> <span class="s1">'new_col'</span><span class="p">,</span> <span class="c1">// optional</span>
  <span class="nx">column</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span>
  <span class="nx">group</span><span class="p">:</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">]</span> <span class="c1">// optional</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-5">Example:</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>15</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
  <span class="nx">name</span><span class="p">:</span> <span class="s1">'percentage'</span><span class="p">,</span>
  <span class="nx">new_column</span><span class="p">:</span> <span class="s1">'Percentage_of_total'</span><span class="p">,</span>
  <span class="nx">column</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
  <span class="nx">group</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Group'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>0.167</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>0.333</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>0.5</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>0.143</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>0.5</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>0.357</td>
    </tr>
  </tbody>
</table>

<h3 id="pivot-step"><code class="highlighter-rouge">pivot</code> step</h3>

<p>Pivot rows into columns around a given <code class="highlighter-rouge">index</code> (expressed as a combination of column(s)).
Values to be used as new column names are found in the column <code class="highlighter-rouge">column_to_pivot</code>.
Values to populate new columns are found in the column <code class="highlighter-rouge">value_column</code>.
The function used to aggregate data (when several rows are found by index group) must be
among <code class="highlighter-rouge">sum</code>, <code class="highlighter-rouge">avg</code>, <code class="highlighter-rouge">count</code>, <code class="highlighter-rouge">min</code> or <code class="highlighter-rouge">max</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
 <span class="nl">name</span><span class="p">:</span> <span class="s1">'pivot'</span><span class="p">,</span>
 <span class="nx">index</span><span class="p">:</span> <span class="p">[</span><span class="s1">'column_1'</span><span class="p">,</span> <span class="s1">'column_2'</span><span class="p">],</span>
 <span class="nx">column_to_pivot</span><span class="p">:</span> <span class="s1">'column_3'</span><span class="p">,</span>
 <span class="nx">value_column</span><span class="p">:</span> <span class="s1">'column_4'</span><span class="p">,</span>
 <span class="nx">agg_function</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-6">Example:</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Country</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Country1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Country1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Country1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 1</td>
      <td>Country2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Country2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Country2</td>
      <td>5</td>
    </tr>
    <tr>
      <td>label 3</td>
      <td>Country2</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
 <span class="nl">name</span><span class="p">:</span> <span class="s1">'pivot'</span><span class="p">,</span>
 <span class="nx">index</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Label'</span><span class="p">],</span>
 <span class="nx">column_to_pivot</span><span class="p">:</span> <span class="s1">'Country'</span><span class="p">,</span>
 <span class="nx">value_column</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
 <span class="nx">agg_function</span><span class="p">:</span> <span class="s1">'sum'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Country1</th>
      <th>Country2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>13</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>7</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>20</td>
      <td>6</td>
    </tr>
  </tbody>
</table>

<h3 id="rename-step"><code class="highlighter-rouge">rename</code> step</h3>

<p>Rename a column.,</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'rename'</span><span class="p">,</span>
    <span class="nx">oldname</span><span class="p">:</span> <span class="s1">'old-column-name'</span><span class="p">,</span>
    <span class="nx">newname</span><span class="p">:</span> <span class="s1">'new-column-name'</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-7">Example:</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'rename'</span><span class="p">,</span>
  <span class="nx">oldname</span><span class="p">:</span> <span class="s1">'Label'</span><span class="p">,</span>
  <span class="nx">newname</span><span class="p">:</span> <span class="s1">'Company'</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<h3 id="replace-step"><code class="highlighter-rouge">replace</code> step</h3>

<p>Replace one or several values in a column, and write resulting column inplace or in a new column.</p>

<p>A replace step has the following strucure:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
   <span class="nl">name</span><span class="p">:</span> <span class="s1">'replace'</span><span class="p">,</span>
   <span class="nx">search_column</span><span class="p">:</span> <span class="s2">"column_1"</span><span class="p">,</span>
   <span class="nx">new_column</span><span class="p">:</span> <span class="s2">"column_2"</span><span class="p">,</span> <span class="c1">// if empty, replace values directly in `search_column` by default</span>
   <span class="nx">to_replace</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">[</span><span class="s1">'foo'</span><span class="p">,</span> <span class="s1">'bar'</span><span class="p">],</span> <span class="c1">// The first value is the one to be replace, the second is the new value</span>
     <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
   <span class="p">]</span>


<span class="p">}</span>
</code></pre></div></div>

<h3 id="example-1-replace-a-single-value-inplace">Example 1: Replace a single value inplace</h3>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Fr</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
   <span class="nl">name</span><span class="p">:</span> <span class="s1">'replace'</span><span class="p">,</span>
   <span class="nx">search_column</span><span class="p">:</span> <span class="s2">"COUNTRY"</span><span class="p">,</span>
   <span class="nx">to_replace</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">[</span><span class="s1">'Fr'</span><span class="p">,</span> <span class="s1">'France'</span><span class="p">]</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
    </tr>
  </tbody>
</table>

<h3 id="example-2-replace-several-values-at-once-in-a-new-column">Example 2: Replace several values at once in a new column</h3>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
   <span class="nl">name</span><span class="p">:</span> <span class="s1">'replace'</span><span class="p">,</span>
   <span class="nx">search_column</span><span class="p">:</span> <span class="s2">"COUNTRY"</span><span class="p">,</span>
   <span class="nx">new_column</span><span class="p">:</span> <span class="s2">"REGION"</span>
   <span class="nx">to_replace</span><span class="p">:</span> <span class="p">[</span>
     <span class="p">[</span><span class="s1">'France'</span><span class="p">,</span> <span class="s1">'Europe'</span><span class="p">]</span>
     <span class="p">[</span><span class="s1">'USA'</span><span class="p">:</span> <span class="s1">'North America'</span><span class="p">]</span>
   <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
      <th>REGION</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>Europe</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>North America</td>
    </tr>
  </tbody>
</table>

<h3 id="select-step"><code class="highlighter-rouge">select</code> step</h3>

<p>Select a column. The default is to keep every columns of the input domain. If
the <code class="highlighter-rouge">select</code> is used, it will only keep selected columns in the output.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'select'</span><span class="p">,</span>
    <span class="nx">columns</span><span class="p">:</span> <span class="p">[</span><span class="s1">'my-column'</span><span class="p">,</span> <span class="s1">'some-other-column'</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-8">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>Group 1</td>
      <td>13</td>
      <td>Company 1 - Group 1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>Group 1</td>
      <td>7</td>
      <td>Company 2 - Group 1</td>
    </tr>
    <tr>
      <td>Company 3</td>
      <td>Group 1</td>
      <td>20</td>
      <td>Company 3 - Group 1</td>
    </tr>
    <tr>
      <td>Company 4</td>
      <td>Group 2</td>
      <td>1</td>
      <td>Company 4 - Group 2</td>
    </tr>
    <tr>
      <td>Company 5</td>
      <td>Group 2</td>
      <td>10</td>
      <td>Company 5 - Group 2</td>
    </tr>
    <tr>
      <td>Company 6</td>
      <td>Group 2</td>
      <td>5</td>
      <td>Company 6 - Group 2</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'select'</span><span class="p">,</span>
    <span class="nx">columns</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Value'</span><span class="p">,</span> <span class="s1">'Label'</span><span class="p">]</span>
<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Value</th>
      <th>Label</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>13</td>
      <td>Company 1 - Group 1</td>
    </tr>
    <tr>
      <td>7</td>
      <td>Company 2 - Group 1</td>
    </tr>
    <tr>
      <td>20</td>
      <td>Company 3 - Group 1</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Company 4 - Group 2</td>
    </tr>
    <tr>
      <td>10</td>
      <td>Company 5 - Group 2</td>
    </tr>
    <tr>
      <td>5</td>
      <td>Company 6 - Group 2</td>
    </tr>
  </tbody>
</table>

<h3 id="sort-step"><code class="highlighter-rouge">sort</code> step</h3>

<p>Sort values in one or several columns. Order can be either ‘asc’ or ‘desc’.
When sorting on several columns, order of columns specified in <code class="highlighter-rouge">columns</code> matters.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'sort'</span><span class="p">,</span>
    <span class="nx">columns</span><span class="p">:</span> <span class="p">[{</span><span class="na">column</span><span class="p">:</span> <span class="s1">'foo'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'asc'</span><span class="p">},</span> <span class="p">{</span><span class="na">column</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'desc'</span><span class="p">}],</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-9">Example</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="nl">name</span><span class="p">:</span> <span class="s1">'sort'</span><span class="p">,</span>
    <span class="nx">columns</span><span class="p">:</span> <span class="p">[{</span> <span class="na">column</span><span class="p">:</span> <span class="s1">'Group'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'asc'</span><span class="p">},</span> <span class="p">{</span><span class="na">column</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span> <span class="na">order</span><span class="p">:</span> <span class="s1">'desc'</span> <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
  </tbody>
</table>

<h3 id="top-step"><code class="highlighter-rouge">top</code> step</h3>

<p>Return top N rows by group if <code class="highlighter-rouge">groups</code> is specified, else over full dataset.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'top'</span><span class="p">,</span>
  <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'foo'</span><span class="p">],</span>
  <span class="nx">rank_on</span><span class="p">:</span> <span class="s1">'bar'</span><span class="p">,</span>
  <span class="nx">sort</span><span class="p">:</span> <span class="s1">'desc'</span><span class="p">,</span> <span class="c1">// or 'asc'</span>
  <span class="nx">limit</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-1-top-without-groups-ascending-order">Example 1: top without <code class="highlighter-rouge">groups</code>, ascending order</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'top'</span><span class="p">,</span>
  <span class="nx">rank_on</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
  <span class="nx">sort</span><span class="p">:</span> <span class="s1">'asc'</span><span class="p">,</span>
  <span class="nx">limit</span><span class="p">:</span> <span class="mi">3</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
  </tbody>
</table>

<h4 id="example-2-top-with-groups-descending-order">Example 2: top with <code class="highlighter-rouge">groups</code>, descending order</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Label</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 1</td>
      <td>Group 1</td>
      <td>13</td>
    </tr>
    <tr>
      <td>Label 2</td>
      <td>Group 1</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 4</td>
      <td>Group 2</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Label 6</td>
      <td>Group 2</td>
      <td>5</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'top'</span><span class="p">,</span>
  <span class="nx">groups</span><span class="p">:</span> <span class="p">[</span><span class="s1">'Group'</span><span class="p">],</span>
  <span class="nx">rank_on</span><span class="p">:</span> <span class="s1">'Value'</span><span class="p">,</span>
  <span class="nx">sort</span><span class="p">:</span> <span class="s1">'desc'</span><span class="p">,</span>
  <span class="nx">limit</span><span class="p">:</span> <span class="mi">1</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>Company</th>
      <th>Group</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Label 3</td>
      <td>Group 1</td>
      <td>20</td>
    </tr>
    <tr>
      <td>Label 5</td>
      <td>Group 2</td>
      <td>10</td>
    </tr>
  </tbody>
</table>

<h3 id="unpivot-step"><code class="highlighter-rouge">unpivot</code> step</h3>

<p>Unpivot a list of columns to rows.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'unpivot'</span><span class="p">,</span>
  <span class="nx">keep</span><span class="p">:</span> <span class="p">[</span><span class="s1">'COMPANY'</span><span class="p">,</span> <span class="s1">'COUNTRY'</span><span class="p">],</span> <span class="c1">// columns to keep fixed around which to unpivot columns</span>
  <span class="nx">unpivot</span><span class="p">:</span> <span class="p">[</span><span class="s1">'NB_CLIENTS'</span><span class="p">,</span> <span class="s1">'REVENUES'</span><span class="p">],</span> <span class="c1">// columns to unpivot</span>
  <span class="nx">unpivot_column_name</span><span class="p">:</span> <span class="s1">'KPI'</span><span class="p">,</span> <span class="c1">// name of the new dimension column created after unpivot</span>
  <span class="nx">value_column_name</span><span class="p">:</span> <span class="s1">'VALUE'</span><span class="p">,</span> <span class="c1">// name of the new value column created after unpivot</span>
  <span class="nx">dropna</span><span class="p">:</span> <span class="kc">true</span> <span class="c1">// whether null values have to be kept or the corresponding rows discarded</span>
<span class="p">}</span>
</code></pre></div></div>

<h4 id="example-1-with-dropnaparameter-to-true">Example 1: with <code class="highlighter-rouge">dropna</code>parameter to true</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
      <th>NB_CLIENTS</th>
      <th>REVENUES</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>7</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>France</td>
      <td>2</td>
      <td> </td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>12</td>
      <td>6</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>1</td>
      <td>3</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'unpivot'</span><span class="p">,</span>
  <span class="nx">keep</span><span class="p">:</span> <span class="p">[</span><span class="s1">'COMPANY'</span><span class="p">,</span> <span class="s1">'COUNTRY'</span><span class="p">],</span>
  <span class="nx">unpivot</span><span class="p">:</span> <span class="p">[</span><span class="s1">'NB_CLIENTS'</span><span class="p">,</span> <span class="s1">'REVENUES'</span><span class="p">],</span>
  <span class="nx">unpivot_column_name</span><span class="p">:</span> <span class="s1">'KPI'</span><span class="p">,</span>
  <span class="nx">value_column_name</span><span class="p">:</span> <span class="s1">'VALUE'</span><span class="p">,</span>
  <span class="nx">dropna</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
      <th>KPI</th>
      <th>VALUE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>NB_CLIENTS</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>REVENUES</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>France</td>
      <td>NB_CLIENTS</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>NB_CLIENTS</td>
      <td>12</td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>REVENUES</td>
      <td>6</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>NB_CLIENTS</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>REVENUES</td>
      <td>3</td>
    </tr>
  </tbody>
</table>

<h4 id="example-1-with-dropnaparameter-to-false">Example 1: with <code class="highlighter-rouge">dropna</code>parameter to false</h4>

<p><strong>Input dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
      <th>NB_CLIENTS</th>
      <th>REVENUES</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>7</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>France</td>
      <td>2</td>
      <td> </td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>12</td>
      <td>6</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>1</td>
      <td>3</td>
    </tr>
  </tbody>
</table>

<p><strong>Step configuration:</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="s1">'unpivot'</span><span class="p">,</span>
  <span class="nx">keep</span><span class="p">:</span> <span class="p">[</span><span class="s1">'COMPANY'</span><span class="p">,</span> <span class="s1">'COUNTRY'</span><span class="p">],</span>
  <span class="nx">unpivot</span><span class="p">:</span> <span class="p">[</span><span class="s1">'NB_CLIENTS'</span><span class="p">,</span> <span class="s1">'REVENUES'</span><span class="p">],</span>
  <span class="nx">unpivot_column_name</span><span class="p">:</span> <span class="s1">'KPI'</span><span class="p">,</span>
  <span class="nx">value_column_name</span><span class="p">:</span> <span class="s1">'VALUE'</span><span class="p">,</span>
  <span class="nx">dropna</span><span class="p">:</span> <span class="kc">false</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>Output dataset:</strong></p>

<table>
  <thead>
    <tr>
      <th>COMPANY</th>
      <th>COUNTRY</th>
      <th>KPI</th>
      <th>VALUE</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>NB_CLIENTS</td>
      <td>7</td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>France</td>
      <td>REVENUES</td>
      <td>10</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>France</td>
      <td>NB_CLIENTS</td>
      <td>2</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>France</td>
      <td>REVENUES</td>
      <td> </td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>NB_CLIENTS</td>
      <td>12</td>
    </tr>
    <tr>
      <td>Company 1</td>
      <td>USA</td>
      <td>REVENUES</td>
      <td>6</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>NB_CLIENTS</td>
      <td>1</td>
    </tr>
    <tr>
      <td>Company 2</td>
      <td>USA</td>
      <td>REVENUES</td>
      <td>3</td>
    </tr>
  </tbody>
</table>
</div>
            





  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/docs/unpivot/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/docs/stepforms/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
      </ul>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Weaverbird 2019 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = ''
</script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="/js/bootstrap.min.js "></script>
<script src="/js/typeahead.bundle.min.js "></script>

<script src="/js/main.js "></script>

</body>

</html>
